<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG ì¢Œí‘œ ë³€í™˜ê¸° - í”½ì…€ â†’ í¼ì„¼íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background-color: #1a1a1a;
            color: #fff;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            margin-bottom: 2rem;
            color: #4CAF50;
        }

        .input-section, .output-section {
            background-color: #2d2d2d;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .input-section h2, .output-section h2 {
            color: #4CAF50;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            background-color: #1e1e1e;
            color: #4CAF50;
            border: 1px solid #444;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            border-radius: 4px;
            resize: vertical;
        }

        .info {
            background-color: #3d3d3d;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .info code {
            color: #ffc107;
        }

        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 1rem;
        }

        button:hover {
            background-color: #0056b3;
        }

        .output-code {
            background-color: #1e1e1e;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
        }

        .output-code pre {
            color: #4CAF50;
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .copy-btn {
            background-color: #28a745;
            margin-top: 0.5rem;
        }

        .copy-btn:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ SVG ì¢Œí‘œ ë³€í™˜ê¸° (í”½ì…€ â†’ í¼ì„¼íŠ¸)</h1>
        
        <div class="input-section">
            <h2>1. SVG ì½”ë“œ ì…ë ¥</h2>
            <div class="info">
                <strong>ì‚¬ìš©ë²•:</strong><br>
                â€¢ ì œê³µë°›ì€ SVG ì½”ë“œ ì „ì²´ë¥¼ ì•„ë˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”<br>
                â€¢ viewBox í¬ê¸°ì™€ polygon ì¢Œí‘œë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•©ë‹ˆë‹¤<br>
                â€¢ viewBoxëŠ” <code>0 0 2496 1696</code> í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤
            </div>
            <textarea id="svgInput" placeholder="SVG ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."></textarea>
            <button onclick="convertCoordinates()">ë³€í™˜í•˜ê¸°</button>
        </div>

        <div class="output-section">
            <h2>2. ë³€í™˜ëœ JavaScript ì½”ë“œ</h2>
            <div class="info">
                ì•„ë˜ ì½”ë“œë¥¼ <code>index.html</code>ì˜ <code>blocks</code> ë°°ì—´ì— ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”.
            </div>
            <div class="output-code">
                <pre id="outputCode">ë³€í™˜ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</pre>
            </div>
            <button class="copy-btn" onclick="copyToClipboard()">ì½”ë“œ ë³µì‚¬</button>
        </div>
    </div>

    <script>
        function convertCoordinates() {
            const svgCode = document.getElementById('svgInput').value;
            if (!svgCode.trim()) {
                alert('SVG ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            // viewBox ì¶”ì¶œ
            const viewBoxMatch = svgCode.match(/viewBox="([^"]+)"/);
            if (!viewBoxMatch) {
                alert('viewBoxë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            const viewBox = viewBoxMatch[1].split(/\s+/);
            const svgWidth = parseFloat(viewBox[2]);
            const svgHeight = parseFloat(viewBox[3]);

            if (!svgWidth || !svgHeight) {
                alert('viewBox í¬ê¸°ë¥¼ íŒŒì‹±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            // ëª¨ë“  polygon ì¶”ì¶œ
            const polygonRegex = /<polygon[^>]*points="([^"]+)"[^>]*data-index="(\d+)"[^>]*>/g;
            const polygons = [];
            let match;

            while ((match = polygonRegex.exec(svgCode)) !== null) {
                const pointsString = match[1];
                const dataIndex = parseInt(match[2]);
                
                // í”½ì…€ ì¢Œí‘œë¥¼ í¼ì„¼íŠ¸ë¡œ ë³€í™˜
                const pixelPoints = pointsString.trim().split(/\s+/);
                if (pixelPoints.length < 2) continue; // ìœ íš¨í•˜ì§€ ì•Šì€ polygon ìŠ¤í‚µ

                const percentPoints = [];
                for (let i = 0; i < pixelPoints.length; i += 2) {
                    const x = parseFloat(pixelPoints[i]);
                    const y = parseFloat(pixelPoints[i + 1]);
                    
                    if (isNaN(x) || isNaN(y)) continue;
                    
                    const percentX = ((x / svgWidth) * 100).toFixed(2);
                    const percentY = ((y / svgHeight) * 100).toFixed(2);
                    percentPoints.push(`${percentX}% ${percentY}%`);
                }

                if (percentPoints.length >= 3) { // ìµœì†Œ 3ê°œ ì ì´ ìˆì–´ì•¼ polygon
                    polygons.push({
                        index: dataIndex,
                        points: percentPoints.join(', ')
                    });
                }
            }

            if (polygons.length === 0) {
                alert('polygonì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            // JavaScript ì½”ë“œ ìƒì„±
            let jsCode = 'const blocks = [\n';
            polygons.sort((a, b) => a.index - b.index);
            
            polygons.forEach((poly, idx) => {
                const blockId = idx + 1;
                jsCode += `    { \n`;
                jsCode += `        id: ${blockId}, \n`;
                jsCode += `        name: "${String.fromCharCode(64 + blockId)}ë™", // ì›í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•˜ì„¸ìš”\n`;
                jsCode += `        households: ${Math.floor(950 + Math.random() * 100)}, // ì„¸ëŒ€ìˆ˜ ì¡°ì • í•„ìš”\n`;
                jsCode += `        description: "ë¸”ëŸ­ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",\n`;
                jsCode += `        points: "${poly.points}"\n`;
                jsCode += `    }`;
                if (idx < polygons.length - 1) jsCode += ',';
                jsCode += '\n';
            });
            
            jsCode += '];';

            document.getElementById('outputCode').textContent = jsCode;
        }

        function copyToClipboard() {
            const code = document.getElementById('outputCode').textContent;
            if (code === 'ë³€í™˜ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...') {
                alert('ë¨¼ì € ë³€í™˜ì„ ì‹¤í–‰í•˜ì„¸ìš”.');
                return;
            }

            navigator.clipboard.writeText(code).then(() => {
                alert('ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(err => {
                console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
            });
        }

        // ì˜ˆì‹œ SVG ì½”ë“œ ë¯¸ë¦¬ ì±„ìš°ê¸° (ì„ íƒì‚¬í•­)
        window.addEventListener('load', () => {
            const exampleSvg = `<!-- ì œê³µë°›ì€ SVG ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš” -->`;
            // document.getElementById('svgInput').value = exampleSvg;
        });
    </script>
</body>
</html>

